<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CAFE ‚Äî CACAO | C√† ph√™ ngon, giao nhanh</title>
  <meta name="description" content="C√† ph√™ pha phin, ƒë·ªì u·ªëng & ƒë·ªì ƒÉn nh·∫π. ƒê·∫∑t m√≥n giao t·∫≠n n∆°i, thanh to√°n nhanh.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2218%22 fill=%22000%22/><text x=%2250%22 y=%2262%22 font-size=%2260%22 text-anchor=%22middle%22 fill=%22%23fff%22 font-family=%22Inter,Arial%22>C</text></svg>">

  <!-- OpenGraph / Twitter -->
  <meta property="og:title" content="CAFE ‚Äî CACAO | C√† ph√™ ngon, giao nhanh">
  <meta property="og:description" content="C√† ph√™ pha phin, ƒë·ªì u·ªëng & ƒë·ªì ƒÉn nh·∫π. ƒê·∫∑t m√≥n giao t·∫≠n n∆°i.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://images.unsplash.com/photo-1513475382585-d06e58bcb0ea?q=80&w=1600&auto=format&fit=crop">
  <meta name="twitter:card" content="summary_large_image">

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"CafeOrCoffeeShop",
    "name":"CAFE ‚Äî CACAO",
    "servesCuisine":["Vietnamese","Coffee","Beverages","Snacks"],
    "priceRange":"‚Ç´",
    "telephone":"+84-982-319-886",
    "address":{"@type":"PostalAddress","addressLocality":"H√† N·ªôi","addressCountry":"VN"},
    "url":"./",
    "sameAs":["https://www.facebook.com/profile.php?id=100063544271103"]
  }
  </script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    .glass{backdrop-filter:saturate(120%) blur(10px)}
    .card{transition:transform .18s ease, box-shadow .18s ease}
    .card:hover{transform:translateY(-2px); box-shadow:0 14px 28px rgba(0,0,0,.08)}
    .shadow-soft{box-shadow:0 1px 0 rgba(20,20,20,.05), 0 8px 32px rgba(0,0,0,.06)}
    .fade-in{animation:fade .4s ease both}
    @keyframes fade{from{opacity:0; transform:translateY(6px)}to{opacity:1; transform:none}}
  </style>
</head>
<body class="bg-neutral-50 text-neutral-900 overflow-x-hidden" translate="no">
  <!-- Top gradient -->
  <div class="pointer-events-none absolute inset-0 -z-10">
    <div class="h-[26rem] w-full bg-gradient-to-br from-amber-100 via-rose-100 to-sky-100"></div>
  </div>

  <!-- NAV -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/70 border-b">
    <div class="max-w-screen-xl mx-auto px-4 h-14 flex items-center justify-between">
      <a href="./" class="flex items-center gap-2">
        <div class="h-8 w-8 rounded-xl bg-black text-white grid place-items-center font-bold">C</div>
        <div>
          <div class="font-semibold tracking-wide">CAFE ‚Äî CACAO</div>
          <div id="sub_small" class="text-xs text-neutral-500">ƒê·∫∑t m√≥n giao t·∫≠n n∆°i</div>
        </div>
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a class="hover:opacity-80" href="#about">Gi·ªõi thi·ªáu</a>
        <a class="hover:opacity-80" href="#menu">Menu</a>
        <a class="hover:opacity-80" href="#visit">ƒê·ªãa ch·ªâ</a>
      </nav>

      <div class="flex items-center gap-2">
        <a href="order.html" class="hidden sm:inline-flex bg-black text-white px-3 py-1.5 rounded-lg text-sm">ƒê·∫∑t h√†ng / Order</a>
        <div class="rounded-xl px-1 py-1 bg-white border glass">
          <button id="btnVI" class="px-2 py-1 rounded-lg text-sm font-medium">VI</button>
          <button id="btnEN" class="px-2 py-1 rounded-lg text-sm font-medium">EN</button>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="max-w-screen-xl mx-auto px-4 pt-10">
    <div class="grid lg:grid-cols-2 gap-8 items-center">
      <div>
        <h1 id="hero_title" class="text-4xl sm:text-5xl font-extrabold leading-tight">
          CAFE ‚Äî CACAO<br><span id="hero_title_sub" class="text-neutral-600 font-medium">C√† ph√™ ngon, giao nhanh</span>
        </h1>
        <p id="hero_sub" class="mt-4 text-neutral-600 text-lg">
          Ch·ªçn m√≥n n√≥ng h·ªïi, giao t·∫≠n n∆°i. ƒê·∫∑t h√†ng tr·ª±c tuy·∫øn d·ªÖ d√†ng.
        </p>
        <div class="mt-6 flex gap-3">
          <a href="order.html" class="bg-black text-white px-5 py-3 rounded-xl font-medium">ƒê·∫∑t h√†ng ngay</a>
          <a href="#menu" class="px-5 py-3 rounded-xl font-medium border bg-white">Xem menu</a>
        </div>

        <!-- Quick contacts -->
        <div class="mt-6 flex flex-wrap gap-2 text-sm">
          <a href="https://zalo.me/0982319886" target="_blank" class="px-3 py-1.5 rounded-lg border bg-white">Zalo: 0982319886</a>
          <a href="tel:0982319886" class="px-3 py-1.5 rounded-lg border bg-white">G·ªçi / Call</a>
          <a href="https://www.facebook.com/profile.php?id=100063544271103" target="_blank" class="px-3 py-1.5 rounded-lg border bg-white">Facebook</a>
        </div>
      </div>

      <div class="rounded-3xl bg-white border shadow-soft p-4">
        <img class="rounded-2xl w-full object-cover h-72"
             src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0ea?q=80&w=1600&auto=format&fit=crop"
             alt="Coffee and pastries" />
      </div>
    </div>
  </section>

  <!-- CATEGORY tiles -->
  <section id="menu" class="max-w-screen-xl mx-auto px-4 mt-12">
    <h2 id="sec_menu" class="text-2xl font-bold mb-4">Danh m·ª•c</h2>
    <div class="grid sm:grid-cols-2 gap-4">
      <a href="order.html?category=Food" class="card rounded-2xl bg-white border shadow-soft p-5 flex items-center gap-4">
        <div class="h-12 w-12 rounded-xl bg-amber-500/10 grid place-items-center">üçú</div>
        <div>
          <div class="text-lg font-semibold">ƒê·ªì ƒÉn / Food</div>
          <div class="text-neutral-600 text-sm">M√¨ g√≥i, b√°nh m√¨, x√¥i, ƒÉn v·∫∑t, m√≥n k√®m</div>
        </div>
      </a>
      <a href="order.html?category=Drinks" class="card rounded-2xl bg-white border shadow-soft p-5 flex items-center gap-4">
        <div class="h-12 w-12 rounded-xl bg-sky-500/10 grid place-items-center">ü•§</div>
        <div>
          <div class="text-lg font-semibold">ƒê·ªì u·ªëng / Drinks</div>
          <div class="text-neutral-600 text-sm">C√† ph√™, Smoothies, N∆∞·ªõc √©p‚Ä¶</div>
        </div>
      </a>
    </div>
  </section>

  <!-- Highlights -->
  <section class="max-w-screen-xl mx-auto px-4 mt-10">
    <div class="flex items-center justify-between">
      <h3 id="sec_high" class="text-xl font-semibold mb-3">M√≥n n·ªïi b·∫≠t</h3>
      <a href="order.html" class="text-sm underline">Xem t·∫•t c·∫£</a>
    </div>

    <!-- Loading skeleton -->
    <div id="highlights_skeleton" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <div class="rounded-2xl bg-white border p-4 animate-pulse">
        <div class="w-full h-32 bg-neutral-100 rounded-xl"></div>
        <div class="h-4 bg-neutral-100 rounded mt-3 w-3/5"></div>
        <div class="h-3 bg-neutral-100 rounded mt-2 w-2/5"></div>
      </div>
      <div class="rounded-2xl bg-white border p-4 animate-pulse">
        <div class="w-full h-32 bg-neutral-100 rounded-xl"></div>
        <div class="h-4 bg-neutral-100 rounded mt-3 w-3/5"></div>
        <div class="h-3 bg-neutral-100 rounded mt-2 w-2/5"></div>
      </div>
      <div class="rounded-2xl bg-white border p-4 animate-pulse">
        <div class="w-full h-32 bg-neutral-100 rounded-xl"></div>
        <div class="h-4 bg-neutral-100 rounded mt-3 w-3/5"></div>
        <div class="h-3 bg-neutral-100 rounded mt-2 w-2/5"></div>
      </div>
    </div>

    <div id="highlights" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4 hidden"></div>
    <div id="highlights_error" class="hidden mt-3 text-sm text-red-600"></div>
  </section>

  <!-- About / Hours -->
  <section id="about" class="max-w-screen-xl mx-auto px-4 mt-14 grid lg:grid-cols-2 gap-8">
    <div class="rounded-2xl bg-white border shadow-soft p-6">
      <h3 class="text-xl font-semibold mb-2">V·ªÅ ch√∫ng t√¥i / About us</h3>
      <p class="text-neutral-700 leading-relaxed">
        CAFE ‚Äî CACAO ph·ª•c v·ª• c√† ph√™ pha phin, ƒë·ªì u·ªëng chai s·∫µn v√† nhi·ªÅu m√≥n ƒÉn nh·∫π.
        Ch√∫ng t√¥i cam k·∫øt nguy√™n li·ªáu ch·∫•t l∆∞·ª£ng v√† giao h√†ng nhanh ch√≥ng.
      </p>
      <p class="mt-3 text-neutral-700">
        Theo d√µi Facebook v√† Zalo ƒë·ªÉ nh·∫≠n khuy·∫øn m√£i m·ªõi nh·∫•t!
      </p>
    </div>
    <div class="rounded-2xl bg-white border shadow-soft p-6">
      <h3 class="text-xl font-semibold mb-2">Gi·ªù m·ªü c·ª≠a / Opening hours</h3>
      <ul class="text-neutral-700 space-y-1">
        <li>Mon ‚Äì Fri: 7:00 ‚Äì 21:00</li>
        <li>Sat ‚Äì Sun: 8:00 ‚Äì 21:00</li>
        <li>Hotline: <a class="underline" href="tel:0982319886">0982319886</a></li>
      </ul>
    </div>
  </section>

  <!-- Visit -->
  <section id="visit" class="max-w-screen-xl mx-auto px-4 mt-14 mb-16">
    <h3 class="text-xl font-semibold mb-3">ƒê·ªãa ch·ªâ / Visit us</h3>
    <div class="rounded-2xl overflow-hidden border shadow-soft">
      <iframe class="w-full h-72"
        src="https://www.google.com/maps?q=Hanoi&output=embed"
        loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </section>

  <footer class="border-t bg-white">
    <div class="max-w-screen-xl mx-auto px-4 py-6 text-sm text-neutral-600 flex flex-col sm:flex-row gap-2 sm:items-center sm:justify-between">
      <div>¬© <span id="year"></span> CAFE ‚Äî CACAO</div>
      <div class="flex gap-3">
        <a class="underline" href="order.html">ƒê·∫∑t h√†ng / Order</a>
        <a class="underline" href="admin.html">Admin</a>
      </div>
    </div>
  </footer>

  <!-- Floating contact -->
  <div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2">
    <a href="https://zalo.me/0982319886" target="_blank" class="shadow-lg rounded-full bg-white border w-12 h-12 grid place-items-center" title="Zalo">ZA</a>
    <a href="tel:0982319886" class="shadow-lg rounded-full bg-white border w-12 h-12 grid place-items-center" title="Call" aria-label="Call">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 5c0 8 7 15 15 15l2-3-4-3-3 2a12 12 0 0 1-7-7l2-3-3-4-2 3Z" stroke="currentColor" stroke-width="1.7"/></svg>
    </a>
    <a href="https://www.facebook.com/profile.php?id=100063544271103" target="_blank" class="shadow-lg rounded-full bg-[#1877F2] text-white w-12 h-12 grid place-items-center" title="Facebook">f</a>
  </div>

<script>
/* ================== CONFIG ================== */
const SUPABASE_URL  = 'https://peenohpyubshzxgzzkhx.supabase.co';
const SUPABASE_ANON = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBlZW5vaHB5dWJzaHp4Z3p6a2h4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5OTczOTYsImV4cCI6MjA3NDU3MzM5Nn0.5PJYRCGyhM-E16yJrU5W_kBeDQgaJiine4j_cS9gKoU';
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON);

/* ================== i18n ================== */
const STR = {
  vi: {
    sub_small: "ƒê·∫∑t m√≥n giao t·∫≠n n∆°i",
    hero_title: "CAFE ‚Äî CACAO",
    hero_title_sub: "C√† ph√™ ngon, giao nhanh",
    hero_sub: "Ch·ªçn m√≥n n√≥ng h·ªïi, giao t·∫≠n n∆°i. ƒê·∫∑t h√†ng tr·ª±c tuy·∫øn d·ªÖ d√†ng.",
    menu: "Danh m·ª•c",
    highlights: "M√≥n n·ªïi b·∫≠t",
    view_all: "Xem t·∫•t c·∫£"
  },
  en: {
    sub_small: "Order home delivery",
    hero_title: "CAFE ‚Äî CACAO",
    hero_title_sub: "Great coffee, fast delivery",
    hero_sub: "Hot & fresh delivery. Order online in seconds.",
    menu: "Categories",
    highlights: "Highlights",
    view_all: "View all"
  }
};
let lang = localStorage.getItem('lang') || 'vi';
function syncLang(){
  document.getElementById('sub_small').textContent = STR[lang].sub_small;
  document.getElementById('hero_title').firstChild.textContent = STR[lang].hero_title + "\n";
  document.getElementById('hero_title_sub').textContent = STR[lang].hero_title_sub;
  document.getElementById('hero_sub').textContent = STR[lang].hero_sub;
  document.getElementById('sec_menu').textContent = STR[lang].menu;
  document.getElementById('sec_high').textContent = STR[lang].highlights;
}
document.getElementById('btnVI').onclick = ()=>{ lang='vi'; localStorage.setItem('lang','vi'); syncLang(); };
document.getElementById('btnEN').onclick = ()=>{ lang='en'; localStorage.setItem('lang','en'); syncLang(); };
syncLang();

/* ================== Helpers ================== */
const moneyK = (v)=> {
  const n = Number(v||0);
  if (!n) return lang==='vi' ? '0 ƒë' : '0 VND';
  // 30,000 -> "30k"
  return Math.round(n/1000) + 'k';
};
const pickTitle = (row)=> lang==='vi' ? (row.name_vi || row.name_en || '') : (row.name_en || row.name_vi || '');

/* ================== Highlights ================== */
async function loadHighlights(){
  const skel = document.getElementById('highlights_skeleton');
  const list = document.getElementById('highlights');
  const err  = document.getElementById('highlights_error');
  skel.classList.remove('hidden'); list.classList.add('hidden'); err.classList.add('hidden'); err.textContent='';

  // Select * (works for both schemas)
  let { data, error } = await sb
    .from('products')
    .select('*')
    .limit(6);

  if (error){ skel.classList.add('hidden'); err.textContent='Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.'; err.classList.remove('hidden'); return; }

  // normalize each row
  const norm = (p)=>({
    id: p.id,
    slug: p.slug,
    category: p.category || p.section || '',
    subcategory: p.subcategory || p.subgroup || '',
    name_vi: p.name_vi || p.name || '',
    name_en: p.name_en || '',
    price_vnd: (p.price_vnd != null) ? p.price_vnd : (p.price != null ? p.price : 0),
    image_url: p.image_url || '',
    is_available: ('is_available' in p) ? p.is_available : (('is_active' in p) ? p.is_active : true),
    sort_order: ('sort_order' in p) ? p.sort_order : 100
  });

  const rows = (data||[]).map(norm).filter(r => r.is_available);

  // simple order
  rows.sort((a,b)=> (a.sort_order??100)-(b.sort_order??100));

  list.innerHTML = '';
  rows.forEach(p=>{
    const href  = new URL('order.html', location.href);
    if (p.category) href.searchParams.set('category', p.category);
    if (p.subcategory) href.searchParams.set('subcategory', p.subcategory);

    const title = (lang==='vi' ? (p.name_vi || p.name_en) : (p.name_en || p.name_vi)) || '';
    const moneyK = v => (Math.round((v||0)/1000)+'k');

    const card = document.createElement('a');
    card.href = href.toString();
    card.className = 'card rounded-2xl bg-white border shadow-soft overflow-hidden fade-in';
    card.innerHTML = `
      ${p.image_url ? `<img src="${p.image_url}" class="w-full h-40 object-cover" alt="">`
                     : `<div class="w-full h-40 bg-neutral-100 grid place-items-center text-neutral-400">${(p.category||'').slice(0,2)}</div>`}
      <div class="p-4">
        <div class="font-semibold line-clamp-2">${title}</div>
        <div class="text-xs text-neutral-500 mt-0.5">${p.category||''}${p.subcategory?(' ‚Ä¢ '+p.subcategory):''}</div>
        <div class="mt-2 font-semibold">${moneyK(p.price_vnd)}</div>
      </div>`;
    list.appendChild(card);
  });

  skel.classList.add('hidden');
  list.classList.remove('hidden');
}

document.getElementById('year').textContent = new Date().getFullYear();
loadHighlights();
</script>
</body>
</html>
