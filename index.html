<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CAFE ‚Äî CACAO</title>
  <meta name="description" content="C√† ph√™ pha phin, ƒë·ªì u·ªëng & ƒë·ªì ƒÉn nh·∫π. ƒê·∫∑t m√≥n giao t·∫≠n n∆°i." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2218%22 fill=%23000%22/><text x=%2250%22 y=%2262%22 font-size=%2260%22 text-anchor=%22middle%22 fill=%22%23fff%22 font-family=%22Inter,Arial%22>C</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    :root{--ring:rgba(15,23,42,.08)}
    .glass{backdrop-filter:saturate(120%) blur(12px)}
    .card{transition:transform .18s ease, box-shadow .18s ease}
    .card:hover{transform:translateY(-3px); box-shadow:0 18px 36px rgba(0,0,0,.08)}
    .soft{box-shadow:0 1px 0 rgba(0,0,0,.05), 0 12px 40px rgba(0,0,0,.06)}
    .ring{box-shadow:0 0 0 1px var(--ring) inset}
    .fade{animation:fade .35s ease both}
    @keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
    .blobs:before,.blobs:after{content:"";position:absolute;inset:auto;filter:blur(48px);opacity:.6}
    .blobs:before{right:10%;top:-40px;width:320px;height:320px;background:radial-gradient(closest-side,#ffedd5,transparent)}
    .blobs:after{left:-40px;bottom:-60px;width:280px;height:280px;background:radial-gradient(closest-side,#e0e7ff,transparent)}
  </style>
</head>
<body class="bg-neutral-50 text-neutral-900 selection:bg-black selection:text-white" translate="no">

  <!-- HEADER -->
  <header class="sticky top-0 z-40 bg-white/70 border-b glass">
    <div class="max-w-6xl mx-auto px-4 h-[64px] flex items-center justify-between">
      <a href="./" class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-black text-white grid place-items-center font-bold">C</div>
        <div class="leading-tight">
          <div class="font-semibold tracking-wide">CAFE ‚Äî CACAO</div>
          <div id="sub_small" class="text-xs text-neutral-500">ƒê·∫∑t m√≥n giao t·∫≠n n∆°i</div>
        </div>
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a class="hover:opacity-80" href="#menu">Menu</a>
        <a class="hover:opacity-80" href="#about">Gi·ªõi thi·ªáu</a>
        <a class="hover:opacity-80" href="#visit">ƒê·ªãa ch·ªâ</a>
      </nav>

      <div class="flex items-center gap-2">
        <a href="order.html" class="hidden sm:inline-flex px-3 py-2 rounded-lg bg-black text-white text-sm">ƒê·∫∑t h√†ng</a>
        <div class="flex items-center rounded-xl bg-white ring">
          <button id="btnVI" class="px-2.5 py-1.5 rounded-lg text-sm font-medium">VI</button>
          <button id="btnEN" class="px-2.5 py-1.5 rounded-lg text-sm font-medium">EN</button>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="relative">
    <div class="absolute inset-0 -z-10 blobs"></div>
    <div class="max-w-6xl mx-auto px-4 py-10 lg:py-16 grid lg:grid-cols-2 gap-8 items-center">
      <div class="fade">
        <div class="inline-flex items-center gap-2 text-xs rounded-full px-3 py-1 bg-white ring mb-3">
          <span>‚òÖ</span><span id="badge_text">ƒê·ªì u·ªëng ngon ‚Äì Giao nhanh</span>
        </div>
        <h1 id="hero_title" class="text-4xl sm:text-5xl font-extrabold leading-tight">
          CAFE ‚Äî CACAO
        </h1>
        <p id="hero_sub" class="mt-3 text-neutral-600 text-lg">
          C√† ph√™ pha phin, ƒë·ªì u·ªëng & ƒë·ªì ƒÉn nh·∫π. ƒê·∫∑t m√≥n tr·ª±c tuy·∫øn d·ªÖ d√†ng.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a href="order.html" class="px-5 py-3 rounded-xl bg-black text-white font-medium">ƒê·∫∑t h√†ng ngay</a>
          <a href="#menu" class="px-5 py-3 rounded-xl bg-white ring font-medium">Xem menu</a>
        </div>

        <div class="mt-6 grid grid-cols-3 sm:flex sm:flex-wrap gap-2 text-xs text-neutral-600">
          <div class="px-2.5 py-1.5 rounded-lg bg-white ring">Pha Phin</div>
          <div class="px-2.5 py-1.5 rounded-lg bg-white ring">Smoothies</div>
          <div class="px-2.5 py-1.5 rounded-lg bg-white ring">B√°nh m√¨</div>
          <div class="px-2.5 py-1.5 rounded-lg bg-white ring">X√¥i</div>
          <div class="px-2.5 py-1.5 rounded-lg bg-white ring">ƒÇn v·∫∑t</div>
        </div>
      </div>

      <div class="fade">
        <div class="rounded-3xl bg-white soft ring overflow-hidden">
          <img class="w-full h-[340px] object-cover" src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0ea?q=80&w=1600&auto=format&fit=crop" alt="Coffee and pastries" />
        </div>
        <div class="mt-3 text-xs text-neutral-500 text-center">·∫¢nh minh ho·∫°</div>
      </div>
    </div>
  </section>

  <!-- QUICK CONTACT -->
  <section class="max-w-6xl mx-auto px-4">
    <div class="grid sm:grid-cols-3 gap-3">
      <a href="https://zalo.me/0982319886" target="_blank" class="bg-white ring rounded-2xl p-4 flex items-center justify-between">
        <div>
          <div class="text-sm text-neutral-500">Zalo</div>
          <div class="font-semibold">0982319886</div>
        </div>
        <span>‚Üí</span>
      </a>
      <a href="tel:0982319886" class="bg-white ring rounded-2xl p-4 flex items-center justify-between">
        <div>
          <div class="text-sm text-neutral-500">Hotline</div>
          <div class="font-semibold">G·ªçi / Call</div>
        </div>
        <span>‚Üí</span>
      </a>
      <a href="https://www.facebook.com/profile.php?id=100063544271103" target="_blank" class="bg-white ring rounded-2xl p-4 flex items-center justify-between">
        <div>
          <div class="text-sm text-neutral-500">Facebook</div>
          <div class="font-semibold">Theo d√µi ∆∞u ƒë√£i</div>
        </div>
        <span>‚Üí</span>
      </a>
    </div>
  </section>

  <!-- CATEGORIES -->
  <section id="menu" class="max-w-6xl mx-auto px-4 mt-12">
    <div class="flex items-end justify-between mb-4">
      <h2 id="sec_menu" class="text-2xl font-bold">Danh m·ª•c</h2>
      <a href="order.html" class="text-sm underline">T·∫•t c·∫£ m√≥n</a>
    </div>
    <div class="grid sm:grid-cols-2 gap-4">
      <a href="order.html?category=Food" class="card bg-white ring rounded-2xl p-5 flex items-center gap-4">
        <div class="h-12 w-12 rounded-xl bg-amber-500/10 grid place-items-center text-xl">üçú</div>
        <div>
          <div class="text-lg font-semibold">ƒê·ªì ƒÉn / Food</div>
          <div class="text-neutral-600 text-sm">B√°nh m√¨, M√¨, X√¥i, ƒÇn v·∫∑t, M√≥n k√®m</div>
        </div>
      </a>
      <a href="order.html?category=Drinks" class="card bg-white ring rounded-2xl p-5 flex items-center gap-4">
        <div class="h-12 w-12 rounded-xl bg-sky-500/10 grid place-items-center text-xl">ü•§</div>
        <div>
          <div class="text-lg font-semibold">ƒê·ªì u·ªëng / Drinks</div>
          <div class="text-neutral-600 text-sm">C√† ph√™, Smoothies, N∆∞·ªõc √©p‚Ä¶</div>
        </div>
      </a>
    </div>
  </section>

  <!-- HIGHLIGHTS -->
  <section class="max-w-6xl mx-auto px-4 mt-12">
    <div class="flex items-end justify-between mb-3">
      <h3 id="sec_high" class="text-xl font-semibold">M√≥n n·ªïi b·∫≠t</h3>
      <a href="order.html" class="text-sm underline" id="view_all_link">Xem t·∫•t c·∫£</a>
    </div>

    <div id="highlights_wrap" class="grid xs:grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Skeletons -->
      <div class="bg-white ring rounded-2xl p-4 animate-pulse">
        <div class="w-full h-36 bg-neutral-100 rounded-xl"></div>
        <div class="h-4 bg-neutral-100 rounded mt-3 w-3/5"></div>
        <div class="h-3 bg-neutral-100 rounded mt-2 w-1/2"></div>
      </div>
      <div class="bg-white ring rounded-2xl p-4 animate-pulse">
        <div class="w-full h-36 bg-neutral-100 rounded-xl"></div>
        <div class="h-4 bg-neutral-100 rounded mt-3 w-3/5"></div>
        <div class="h-3 bg-neutral-100 rounded mt-2 w-1/2"></div>
      </div>
      <div class="bg-white ring rounded-2xl p-4 animate-pulse">
        <div class="w-full h-36 bg-neutral-100 rounded-xl"></div>
        <div class="h-4 bg-neutral-100 rounded mt-3 w-3/5"></div>
        <div class="h-3 bg-neutral-100 rounded mt-2 w-1/2"></div>
      </div>
    </div>
    <p id="highlights_err" class="hidden mt-3 text-sm text-red-600">Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.</p>
  </section>

  <!-- ABOUT -->
  <section id="about" class="max-w-6xl mx-auto px-4 mt-14 grid lg:grid-cols-2 gap-6">
    <div class="bg-white ring rounded-3xl p-6 soft">
      <h3 class="text-xl font-semibold mb-2">V·ªÅ ch√∫ng t√¥i / About us</h3>
      <p class="text-neutral-700 leading-relaxed">
        CAFE ‚Äî CACAO ph·ª•c v·ª• c√† ph√™ pha phin, ƒë·ªì u·ªëng chai s·∫µn v√† nhi·ªÅu m√≥n ƒÉn nh·∫π.
        Ch√∫ng t√¥i cam k·∫øt nguy√™n li·ªáu ch·∫•t l∆∞·ª£ng v√† giao h√†ng nhanh ch√≥ng.
      </p>
    </div>
    <div class="bg-white ring rounded-3xl p-6 soft">
      <h3 class="text-xl font-semibold mb-2">Gi·ªù m·ªü c·ª≠a / Opening hours</h3>
      <ul class="text-neutral-700 space-y-1">
        <li>Mon ‚Äì Fri: 7:00 ‚Äì 21:00</li>
        <li>Sat ‚Äì Sun: 8:00 ‚Äì 21:00</li>
        <li>Hotline: <a class="underline" href="tel:0982319886">0982319886</a></li>
      </ul>
    </div>
  </section>

  <!-- MAP -->
  <section id="visit" class="max-w-6xl mx-auto px-4 mt-14 mb-20">
    <h3 class="text-xl font-semibold mb-3">ƒê·ªãa ch·ªâ / Visit us</h3>
    <div class="rounded-3xl overflow-hidden ring bg-white soft">
      <iframe class="w-full h-72"
        src="https://www.google.com/maps?q=Hanoi&output=embed"
        loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Map"></iframe>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t bg-white">
    <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-neutral-600 flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between">
      <div>¬© <span id="year"></span> CAFE ‚Äî CACAO</div>
      <div class="flex gap-3">
        <a class="underline" href="order.html">ƒê·∫∑t h√†ng</a>
        <a class="underline" href="admin.html">Admin</a>
      </div>
    </div>
  </footer>

  <!-- STICKY CTA (mobile) -->
  <div class="fixed bottom-4 left-0 right-0 z-40 px-4 sm:hidden">
    <a href="order.html" class="block text-center py-3 rounded-xl bg-black text-white font-medium soft">ƒê·∫∑t h√†ng ngay</a>
  </div>

<script>
/* ===== Config (unchanged backend) ===== */
const SUPABASE_URL  = 'https://peenohpyubshzxgzzkhx.supabase.co';
const SUPABASE_ANON = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBlZW5vaHB5dWJzaHp4Z3p6a2h4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5OTczOTYsImV4cCI6MjA3NDU3MzM5Nn0.5PJYRCGyhM-E16yJrU5W_kBeDQgaJiine4j_cS9gKoU';
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON);

/* ===== i18n ===== */
const STR = {
  vi: {
    sub_small:"ƒê·∫∑t m√≥n giao t·∫≠n n∆°i",
    badge:"ƒê·ªì u·ªëng ngon ‚Äì Giao nhanh",
    hero_title:"CAFE ‚Äî CACAO",
    hero_sub:"C√† ph√™ pha phin, ƒë·ªì u·ªëng & ƒë·ªì ƒÉn nh·∫π. ƒê·∫∑t m√≥n tr·ª±c tuy·∫øn d·ªÖ d√†ng.",
    menu:"Danh m·ª•c", highlights:"M√≥n n·ªïi b·∫≠t", view_all:"Xem t·∫•t c·∫£"
  },
  en: {
    sub_small:"Order home delivery",
    badge:"Great taste ‚Äî Fast delivery",
    hero_title:"CAFE ‚Äî CACAO",
    hero_sub:"Coffee, drinks & snacks. Order online in seconds.",
    menu:"Categories", highlights:"Highlights", view_all:"View all"
  }
};
let lang = localStorage.getItem('lang') || 'vi';
function syncLang(){
  document.getElementById('sub_small').textContent = STR[lang].sub_small;
  document.getElementById('badge_text').textContent = STR[lang].badge;
  document.getElementById('hero_title').textContent = STR[lang].hero_title;
  document.getElementById('hero_sub').textContent = STR[lang].hero_sub;
  document.getElementById('sec_menu').textContent = STR[lang].menu;
  document.getElementById('sec_high').textContent = STR[lang].highlights;
  document.getElementById('view_all_link').textContent = STR[lang].view_all;
}
document.getElementById('btnVI').onclick=()=>{lang='vi';localStorage.setItem('lang','vi');syncLang();};
document.getElementById('btnEN').onclick=()=>{lang='en';localStorage.setItem('lang','en');syncLang();};
syncLang();

/* ===== helpers ===== */
const moneyK = v => (Math.round((Number(v)||0)/1000)+'k');
const pickName = p => lang==='vi' ? (p.name_vi||p.name_en||'') : (p.name_en||p.name_vi||'');

/* ===== highlights (schema tolerant) ===== */
async function loadHighlights(){
  const wrap = document.getElementById('highlights_wrap');
  const err = document.getElementById('highlights_err');

  let { data, error } = await sb.from('products').select('*').limit(6);
  if (error){ err.classList.remove('hidden'); return; }

  const rows = (data||[]).map(p=>({
    id:p.id,
    slug:p.slug,
    category:p.category||p.section||'',
    subcategory:p.subcategory||p.subgroup||'',
    name_vi:p.name_vi||p.name||'',
    name_en:p.name_en||'',
    price_vnd:(p.price_vnd!=null)?p.price_vnd:(p.price!=null?p.price:0),
    image_url:p.image_url||'',
    is_available:('is_available'in p)?p.is_available:(('is_active'in p)?p.is_active:true),
    sort_order:('sort_order'in p)?p.sort_order:100
  })).filter(p=>p.is_available)
    .sort((a,b)=>(a.sort_order??100)-(b.sort_order??100));

  wrap.innerHTML = '';
  rows.forEach(p=>{
    const href = new URL('order.html', location.href);
    if (p.category) href.searchParams.set('category', p.category);
    if (p.subcategory) href.searchParams.set('subcategory', p.subcategory);

    const el = document.createElement('a');
    el.href = href.toString();
    el.className='bg-white ring rounded-2xl p-4 soft card fade block';
    el.innerHTML = `
      ${p.image_url
        ? `<img src="${p.image_url}" class="w-full h-40 object-cover rounded-xl" alt="">`
        : `<div class="w-full h-40 rounded-xl bg-neutral-100 grid place-items-center text-neutral-400">${(p.category||'').slice(0,2)}</div>`}
      <div class="mt-3 font-semibold line-clamp-2">${pickName(p)}</div>
      <div class="text-xs text-neutral-500">${p.category}${p.subcategory?(' ‚Ä¢ '+p.subcategory):''}</div>
      <div class="mt-1 font-semibold">${moneyK(p.price_vnd)}</div>`;
    wrap.appendChild(el);
  });
}

document.getElementById('year').textContent = new Date().getFullYear();
loadHighlights();
</script>
</body>
</html>
